# whjr 排课规则

## 背景：
  固定分班模式，以班级为颗粒度，报名的学员按照班级的课表上课。

## 公共排课规则-冲突，所有机构都一样：
* 一个老师在同一时间，只在一个班级上课。
* 一个教室在同一时间，只有一个班级使用。
* 一个班级在同一时间，只有一个老师，只用一个教室。
* 教室的容量和班级人数 room.capacity >= activity.capacity。

## 机构个性化排课规则

### 老师
* 强性限制条件：根据教师的带班量，各个级别的老师，带班量的有个上限值。
* 强性限制条件：老师当天不跨校区，只在一个校区上课。
* 跨校区逻辑：一个老师对应1个或者多个行政区（相邻的行政区可以设置成多个），1个行政区下面有多个校区，老师只能上这些校区的课。如：张老师A，只能在行政区武侯区的3个校区上课。


### 教室
* 强制限定条件：教室的不可用时间 ， 比如：A校区教室A1，从12:30 - 13:30不可用


### 班级
* 强制限定条件：班级A 上课时间有要求，比如：周一到周五，周末不上。
* 强制限定条件：班级B 上课时间有要求，比如：只能周六日。
* 强制限定条件：班级C 上课时间有要求，比如：只能隔天上，一三五，周六日不上。
* 弱性限定条件：班级B 上课时间期望时间：上午的10:00~12:00。
* 弱性限定条件：班级 上课时间期望时间：晚上的18:00~20:00。
* 强性限制条件：班级必须排的某一天，如：小学2年级数学-极趣-2班，必须在周六上课。
* 每堂课中间休息15分钟




### 老师跟班级的匹配关系
* 4升5的续报班级，如果老师能上新班型的课，直接平移过来，不能上新班型的课，换其他老师。
* 老师是有level属性，level越高，级别越高。多个老师可以上同一班型的课时，级别高的优先排课。
* 老师-课程（班型）-班级 有对应关系。


